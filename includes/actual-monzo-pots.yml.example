services:
  actual-monzo-pots:
    image: ghcr.io/rjlee/actual-monzo-pots:api-${ACTUAL_API_MAJOR}
    container_name: actual-monzo-pots
    env_file:
      - ../.env
      - ../env/actual-monzo-pots.env
    environment:
      BUDGET_DIR: /app/data/budget
      HTTP_PORT: ${MONZO_HTTP_PORT}
    ports:
      - "${MONZO_HTTP_PORT:-3000}:${MONZO_HTTP_PORT:-3000}"
    restart: unless-stopped
    depends_on:
      actual-events:
        condition: service_healthy
    volumes:
      - type: bind
        source: ../state/actual-monzo-pots
        target: /app/data
    logging:
      driver: json-file
      options:
        max-size: "10m"
        max-file: "3"
